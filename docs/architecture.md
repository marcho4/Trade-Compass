# Архитектура приложения

Приложение будет реализовано в виде микросервисов с единой базой данных PostgreSQL для сохранения реляционной модели данных и возможности делать транзакции, что важно для финансовых данных воизбежании неконсистентного состояния.

## Сервисы

### Сервис парсинга и скачивания отчетов

Язык программирования: Python

- Сохраняет финансовые отчеты с сайта e-disclosure.ru для всех компаний, затем превращает их в текст и вытягивает нужные данные оттуда.
- Обновляется раз в день.
- Хранит состояние отчетов в базе данных в таблице Reports

### Сервис подсчета метрик индустрии и секторов и получения цен котировок

Язык программирования: Go

- Сервис будет ходить по апишке и получать стоимость акций.
- Подсчет метрик для индустрий
- Подсчет метрик для секторов

## Scheduler

Язык программирования: Go

- Обновляет цены раз в 15 минут
- Пересчитывает текущие индикаторы для компаний
- Потенциально может пересчитывать стоит ли перелиться для всех премиум портфелей и отправлять алерты пользователям (фича на будущее)


## Portfolio service

Язык программирования: Go

В конфиге нужно установить базовый налог на продажу с прибылью. 
Еще нужно задать среднюю комиссию для продажи (для комиссии дать пользователю установить самостоятельно или брать среднюю по рынку)

- CRUD API для портфелей
- Получить rebalance suggestions - тяжелая ручка - делаем кэширование с ттл 1 час

Для ребалансировки нужно придумать несколько стратегий - сделать интерфейс - RebalanceStrategy с методом GetSuggestions - на вход принимает портфель в json/proto объекте.

## Companies service

Язык программирования: Go

- Должна быть ручка, чтобы подгрузить данные из отчета
- Должна отдавать все метрики по компании в одном ответе (Annual / Quarterly)

